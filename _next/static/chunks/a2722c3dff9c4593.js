(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";e.s(["default",()=>a],52683);var t=e.i(43476),l=e.i(71645);let s=e=>{let{fileText:s}=e,[a,r]=(0,l.useState)([{role:"bot",content:"업로드된 기획서에서 궁금한 점을 질문해 주세요."}]),[n,d]=(0,l.useState)(""),[i,c]=(0,l.useState)(!1),[o,x]=(0,l.useState)(""),u=async()=>{if(n.trim()&&!i){r(e=>[...e,{role:"user",content:n}]),c(!0),x("");try{let e=await fetch("/api/gemini-spellcheck",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileText:s,question:n})}),t=await e.json();t.answer?r(e=>[...e,{role:"bot",content:t.answer}]):r(e=>{var l;return[...e,{role:"bot",content:(null==t||null==(l=t.error)?void 0:l.message)||"AI 답변을 가져오지 못했습니다."}]})}catch(e){x("서버 또는 네트워크 오류가 발생했습니다.")}finally{c(!1),d("")}}};return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"bg-gray-100 rounded p-2 h-40 overflow-y-auto mb-2",children:[a.map((e,l)=>(0,t.jsxs)("div",{className:"user"===e.role?"text-right":"text-left",children:[(0,t.jsx)("span",{className:"user"===e.role?"text-blue-700":"text-gray-800 font-semibold",children:"user"===e.role?"나: ":"챗봇: "}),e.content]},l)),i&&(0,t.jsx)("div",{className:"text-gray-500 text-sm",children:"AI 답변 생성 중..."})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{className:"flex-1 border rounded px-2 py-1",type:"text",value:n,placeholder:"질문을 입력하세요",onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&u()},disabled:i}),(0,t.jsx)("button",{className:"bg-blue-600 text-white px-4 py-1 rounded",onClick:u,disabled:i,children:"전송"})]}),o&&(0,t.jsx)("div",{className:"text-red-600 text-sm mt-1",children:o})]})};function a(){let e=(0,l.useRef)(null),[a,r]=(0,l.useState)(""),[n,d]=(0,l.useState)(""),[i,c]=(0,l.useState)("");return(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 py-10",children:(0,t.jsxs)("div",{className:"w-full max-w-[80%] bg-white rounded-xl shadow-md p-8 flex flex-col items-center gap-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"오타 교정 챗봇"}),(0,t.jsxs)("label",{className:"w-full flex flex-col items-center gap-2 cursor-pointer",children:[(0,t.jsx)("span",{className:"text-gray-700",children:"파일 업로드 (txt, docx, pdf)"}),(0,t.jsx)("input",{type:"file",accept:".txt,.docx,.pdf",ref:e,onChange:e=>{var t;let l=null==(t=e.target.files)?void 0:t[0];if(!l)return;let s=l.name.slice(l.name.lastIndexOf(".")).toLowerCase();if(![".txt",".docx",".pdf"].includes(s)){d("지원하지 않는 파일 형식입니다. (txt, docx, pdf만 가능)"),r("");return}if(r(l.name),d(""),".txt"===s){let e=new FileReader;e.onload=e=>{var t;c((null==(t=e.target)?void 0:t.result)||"")},e.readAsText(l)}else".pdf"===s?c("PDF 파일 텍스트 추출은 추후 지원 예정입니다."):".docx"===s&&c("DOCX 파일 텍스트 추출은 추후 지원 예정입니다.")},className:"border rounded px-3 py-2 w-full"})]}),a&&(0,t.jsxs)("div",{className:"text-green-700",children:["업로드 파일: ",a]}),n&&(0,t.jsx)("div",{className:"text-red-600",children:n}),i&&(0,t.jsxs)("div",{className:"w-full mt-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"챗봇"}),(0,t.jsx)(s,{fileText:i})]})]})})}}]);